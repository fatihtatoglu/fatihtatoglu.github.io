<!DOCTYPE html><html lang="en"><head><base href="https://blog.tatoglu.net/"><meta charset="UTF-8"><meta name="yandex-verification" content="31a29a16b97b37a8"><meta name="msvalidate.01" content="578B5091D7C5A2C03BE2EE0DF0CCC024"><meta name="google-site-verification" content="Ovuv1WWfkBGnFfpFHwwPPQSv274GrePTq1hq1Oq0Xc8"><link rel="profile" href="https://gmpg.org/xfn/11"><meta name="description" content="Set up HAProxy on CentOS 7.X for efficient load balancing. Follow step-by-step instructions for preparation, installation, configuration, and security. Ensure a smooth deployment."><meta name="author" content="Fatih Tatoğlu"><meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&display=swap&v=2f8e2cd74f209a0564ea9298b99c1e66" rel="stylesheet"><link rel="canonical" href="https://blog.tatoglu.net/en/lab/haproxy/default-routing.html"><link rel="alternate" hreflang="x-default" href="https://blog.tatoglu.net/lab/haproxy/default-routing.html"><link rel="alternate" hreflang="tr" href="https://blog.tatoglu.net/lab/haproxy/default-routing.html"><link rel="alternate" hreflang="en" href="https://blog.tatoglu.net/en/lab/haproxy/default-routing.html"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Fatih Tatoğlu - Static Routing</title><link rel="stylesheet" href="https://blog.tatoglu.net/css/main.css?v=2f8e2cd74f209a0564ea9298b99c1e66"><link rel="stylesheet" href="https://blog.tatoglu.net/css/custom.css?v=2f8e2cd74f209a0564ea9298b99c1e66"><link rel="apple-touch-icon" sizes="180x180" href="https://blog.tatoglu.net/image/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://blog.tatoglu.net/image/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://blog.tatoglu.net/image/favicon/favicon-16x16.png"><link rel="manifest" href="https://blog.tatoglu.net/image/favicon/site.webmanifest"><link rel="icon" href="https://blog.tatoglu.net/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="https://blog.tatoglu.net/favicon.ico" type="image/x-icon"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@fatihtatoglu"><meta name="twitter:title" content="Static Routing"><meta name="twitter:description" content="Set up HAProxy on CentOS 7.X for efficient load balancing. Follow step-by-step instructions for preparation, installation, configuration, and security. Ensure a smooth deployment."><script type="application/ld+json">{"@context": "https://schema.org","@graph": [{"@type": "WebSite","@id": "https://blog.tatoglu.net/#website","url": "https://blog.tatoglu.net/","name": "Fatih Tatoğlu","description": "Fatih Tatoğlu - Kişisel Web Sayfası","publisher": {"@id": "https://blog.tatoglu.net//#/schema/person/9112274035621a3fbf80e30c19216034"},"inLanguage": ""},{"@type": "WebPage","@id": "https://blog.tatoglu.net/en/lab/haproxy/default-routing.html/#webpage","url": "https://blog.tatoglu.net/en/lab/haproxy/default-routing.html","name": "Static Routing - Fatih Tatoğlu","isPartOf": {"@id": "https://blog.tatoglu.net/#website"},"datePublished": "2022-06-12T20:25:53+0000","breadcrumb": {"@id": "https://blog.tatoglu.net/en/lab/haproxy/default-routing.html/#breadcrumb"},"inLanguage": "","potentialAction": [{"@type": "ReadAction","target": ["https://blog.tatoglu.net/en/lab/haproxy/default-routing.html"]}]},{"@type": "BreadcrumbList","@id": "https://blog.tatoglu.net/en/lab/haproxy/default-routing.html/#breadcrumb","itemListElement": [{"@type": "ListItem","position": 1,"name": "Ana sayfa","item": "https://blog.tatoglu.net/"},{"@type": "ListItem","position": 2,"name": "Static Routing"}]},{"@type": "Article","@id": "https://blog.tatoglu.net/en/lab/haproxy/default-routing.html/#article","isPartOf": {"@id": "https://blog.tatoglu.net/en/lab/haproxy/default-routing.html/#webpage"},"author": {"@id": "https://blog.tatoglu.net//#/schema/person/9112274035621a3fbf80e30c19216034"},"headline": "Static Routing","datePublished": "2022-06-12T20:25:53+0000","mainEntityOfPage": {"@id": "https://blog.tatoglu.net/en/lab/haproxy/default-routing.html/#webpage"},"publisher": {"@id": "https://blog.tatoglu.net//#/schema/person/9112274035621a3fbf80e30c19216034"},"articleSection": ["lab"],"keywords": ["haproxy","redirect","static content"],"inLanguage": ""},{"@type": ["Person"],"@id": "https://blog.tatoglu.net//#/schema/person/9112274035621a3fbf80e30c19216034","name": "Fatih Tatoğlu","url": "https://blog.tatoglu.net/about-me.html","image": {"@type": "ImageObject","@id": "https://blog.tatoglu.net/#personlogo","inLanguage": "","url": "https://blog.tatoglu.net/image/about_me.jpg","contentUrl": "https://blog.tatoglu.net/image/about_me.jpg","width": 1024,"height": 683,"caption": "Fatih Tatoğlu"},"address": {"@type": "PostalAddress","addressLocality": "İstanbul","addressCountry": "Turkey"},"email": "fatih@tatoglu.net"}]}</script></head><body><header><h1 id="title">Static Routing</h1><summary></summary></header><nav><i class="menu-icon">&#9776;</i><ul><li><a href="https://blog.tatoglu.net/en/index.html">Home Page</a></li><li><a href="https://blog.tatoglu.net/en/coaching/index.html">Coaching</a></li><li><a href="https://blog.tatoglu.net/en/my-notes/index.html">My Notes</a></li><li><a href="https://blog.tatoglu.net/en/lab/index.html">Laboratory</a></li><li><a href="https://blog.tatoglu.net/en/about-me.html">About Me</a></li><li><button id="btnFeedback" class="icon feedback" title="Feedback">&nbsp;</button> <button id="btnDarkTheme" class="icon dark-theme" title="Dark Theme">&nbsp;</button> <button id="btnLightTheme" class="icon light-theme" title="Light Theme">&nbsp;</button> <button id="btnTurkish" class="icon turkish" title="Turkish">&nbsp;</button></li></ul></nav><main><section><strong>HAProxy</strong><ul><li><a href=".&#x2F;en&#x2F;lab&#x2F;haproxy&#x2F;setup.html">Setup</a></li><li><a href=".&#x2F;en&#x2F;lab&#x2F;haproxy&#x2F;cluster.html">Cluster</a></li><li class="active">Static Routing</li><li><a href=".&#x2F;en&#x2F;lab&#x2F;haproxy&#x2F;ssl-certificate.html">SSL Certificate</a></li></ul></section><article><p>HAProxy routes the incoming requests to the <code>backend</code> services after finding the correct routing rule. On the other hand, when it cannot find any routing rule, the request must be ended. An ordinary method for this is using static content. The static content can be used against the search engines to reduce server costs.</p><pre><code class="language-shell">devops@haproxy-01:~$ sudo vi /etc/haproxy/haproxy.conf
</code></pre><pre><code class="language-nestedtext">...
##################################################
#                    Frontend                    #
##################################################
frontend http_in
    mode http
    bind *:80

    #logging
    option httplog

    #http options
    option http-server-close
    option forwardfor

    #redirection rules

    default_backend be_default
##################################################


##################################################
#                    Backend                     #
##################################################
backend be_default
    mode http

    errorfile 503 /etc/haproxy/errors/503.http
##################################################
...
</code></pre><p>After this, the static content is created.</p><pre><code class="language-shell">devops@haproxy-01:~$ sudo vi /etc/haproxy/errors/503.http
</code></pre><pre><code class="language-html">HTTP/1.0 503 Service Unavailable
Cache-Control: no-cache
Connection: close
Content-Type: text/html

&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Fatih Tatoğlu&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;SERVICE UNAVAILABLE&lt;/h1&gt;
        &lt;p&gt;The server is currently unable to handle the request due to a temporary overload or scheduled maintenance, which will likely be alleviated after some delay.&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><p>The static response is ready. The HAProxy will return the above HTML content with a 503 HTTP status code if a request cannot be matched by routing.</p><p>Before applying this change, the config file must be validated.</p><pre><code class="language-shell">devops@haproxy-01:~$ sudo /opt/haproxy/sbin/haproxy -c -V -f /etc/haproxy/haproxy.conf
devops@haproxy-01:~$ sudo systemctl reload haproxy
</code></pre><p>If there is a cluster environment, the configuration must be applied to all servers.</p></article></main><footer>&copy; 1985 - <a href="en/about-me.html" rel="noopener noreferrer" target="_blank">Fatih Tatoğlu</a></footer><script src="https://blog.tatoglu.net/js/main.js?v=2f8e2cd74f209a0564ea9298b99c1e66"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-GSVKFRLFNV&v=2f8e2cd74f209a0564ea9298b99c1e66"></script><script src="https://blog.tatoglu.net/js/analytics.js?v=2f8e2cd74f209a0564ea9298b99c1e66"></script><div id="pnlFeedbackSurvey"><div class="model-content"><button id="btnFeedbackSurveyClose" class="icon bold x-small">&times;</button><iframe src="https://docs.google.com/forms/d/e/1FAIpQLSewJ_x10HBlFs2lO2zHUBI3ZeSdEXaISpK292RPJBoZyeC1HA/viewform?embedded=true" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe></div></div></body></html>