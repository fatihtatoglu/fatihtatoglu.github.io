<!DOCTYPE html><html lang="tr"><head><base href="https://blog.tatoglu.net/"><meta charset="UTF-8"><meta name="yandex-verification" content="31a29a16b97b37a8"><meta name="msvalidate.01" content="578B5091D7C5A2C03BE2EE0DF0CCC024"><meta name="google-site-verification" content="Ovuv1WWfkBGnFfpFHwwPPQSv274GrePTq1hq1Oq0Xc8"><link rel="profile" href="https://gmpg.org/xfn/11"><meta name="description" content="Verimli yük dengeleme için CentOS 7.X'te HAProxy'yi kurun. Hazırlık, kurulum, yapılandırma ve güvenlik için adım adım talimatları izleyin. Sorunsuz bir dağıtım sağlayın."><meta name="author" content="Fatih Tatoğlu"><meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&display=swap&v=bba70b2d40022d7d7e5a20ceaa743f5b" rel="stylesheet"><link rel="canonical" href="https://blog.tatoglu.net/lab/haproxy/default-routing.html"><link rel="alternate" hreflang="x-default" href="https://blog.tatoglu.net/lab/haproxy/default-routing.html"><link rel="alternate" hreflang="tr" href="https://blog.tatoglu.net/lab/haproxy/default-routing.html"><link rel="alternate" hreflang="en" href="https://blog.tatoglu.net/en/lab/haproxy/default-routing.html"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Fatih Tatoğlu - HAProxy - Statik Yönlendirme</title><link rel="stylesheet" href="https://blog.tatoglu.net/css/main.css?v=bba70b2d40022d7d7e5a20ceaa743f5b"><link rel="stylesheet" href="https://blog.tatoglu.net/css/custom.css?v=bba70b2d40022d7d7e5a20ceaa743f5b"><link rel="apple-touch-icon" sizes="180x180" href="https://blog.tatoglu.net/image/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://blog.tatoglu.net/image/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://blog.tatoglu.net/image/favicon/favicon-16x16.png"><link rel="manifest" href="https://blog.tatoglu.net/image/favicon/site.webmanifest"><link rel="icon" href="https://blog.tatoglu.net/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="https://blog.tatoglu.net/favicon.ico" type="image/x-icon"></head><body><header><h1 id="title">Statik Yönlendirme</h1><summary></summary></header><nav><i class="menu-icon">&#9776;</i><ul><li><a href="https://blog.tatoglu.net/index.html">Anasayfa</a></li><li><a href="https://blog.tatoglu.net/coaching/index.html">Koçluk</a></li><li><a href="https://blog.tatoglu.net/my-notes/index.html">Notlarım</a></li><li><a href="https://blog.tatoglu.net/lab/index.html">Laboratuvar</a></li><li><a href="https://blog.tatoglu.net/about-me.html">Hakkımda</a></li><li><button id="btnFeedback" class="icon feedback" title="Geri Bildirim">&nbsp;</button> <button id="btnDarkTheme" class="icon dark-theme" title="Koyu Tema">&nbsp;</button> <button id="btnLightTheme" class="icon light-theme" title="Açık Tema">&nbsp;</button> <button id="btnEnglish" class="icon english" title="İngilizce">&nbsp;</button></li></ul></nav><main class="labs"><section><strong>HAProxy</strong><ul><li><a href=".&#x2F;lab&#x2F;haproxy&#x2F;setup.html">Kurulum</a></li><li><a href=".&#x2F;lab&#x2F;haproxy&#x2F;building-cluster.html">Cluster Oluşturmak</a></li><li class="active">Statik Yönlendirme</li><li><a href=".&#x2F;lab&#x2F;haproxy&#x2F;ssl-certificate.html">SSL Sertifika</a></li></ul></section><article><p>HAProxy, doğru yönlendirme kuralını bulduktan sonra gelen istekleri <code>backend</code> servislerine yönlendirir. Öte yandan herhangi bir yönlendirme kuralı bulamadığında isteğin sonlandırılması gerekir. Bunun için sıradan bir yöntem statik içerik kullanmaktır. Statik içerik, sunucu maliyetlerini azaltmak için arama motorlarına karşı kullanılabilir.</p><pre><code class="language-shell"><span class="language-shell-user">devops@haproxy-01:~$</span> sudo vi /etc/haproxy/haproxy.conf
</code></pre><pre><code class="language-nestedtext">...
##################################################
#                    Frontend                    #
##################################################
frontend http_in
    mode http
    bind *:80

    #logging
    option httplog

    #http options
    option http-server-close
    option forwardfor

    #redirection rules

    default_backend be_default
##################################################


##################################################
#                    Backend                     #
##################################################
backend be_default
    mode http

    errorfile 503 /etc/haproxy/errors/503.http
##################################################
...
</code></pre><p>Bundan sonra statik içerik oluşturulur.</p><pre><code class="language-shell"><span class="language-shell-user">devops@haproxy-01:~$</span> sudo vi /etc/haproxy/errors/503.http
</code></pre><pre><code class="language-html">HTTP/1.0 503 Service Unavailable
Cache-Control: no-cache
Connection: close
Content-Type: text/html

&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Fatih Tatoğlu&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;SERVICE UNAVAILABLE&lt;/h1&gt;
        &lt;p&gt;The server is currently unable to handle the request due to a temporary overload or scheduled maintenance, which will likely be alleviated after some delay.&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><p>Statik yanıt hazır. HAProxy, bir isteğin yönlendirmeyle eşleştirilememesi durumunda yukarıdaki HTML içeriğini 503 HTTP durum koduyla döndürecektir.</p><p>Bu değişikliği uygulamadan önce yapılandırma dosyasının doğrulanması gerekir.</p><pre><code class="language-shell"><span class="language-shell-user">devops@haproxy-01:~$</span> sudo /opt/haproxy/sbin/haproxy -c -V -f /etc/haproxy/haproxy.conf
<span class="language-shell-user">devops@haproxy-01:~$</span> sudo systemctl reload haproxy
</code></pre><p>Cluster ortamı var ise konfigürasyonun tüm sunuculara uygulanması gerekmektedir.</p></article></main><footer>&copy; 1985 - <a href="about-me.html" rel="noopener noreferrer" target="_blank">Fatih Tatoğlu</a></footer><script src="https://blog.tatoglu.net/js/main.js?v=bba70b2d40022d7d7e5a20ceaa743f5b"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-GSVKFRLFNV&v=bba70b2d40022d7d7e5a20ceaa743f5b"></script><script src="https://blog.tatoglu.net/js/analytics.js?v=bba70b2d40022d7d7e5a20ceaa743f5b"></script><div id="pnlFeedbackSurvey"><div class="model-content"><button id="btnFeedbackSurveyClose" class="icon bold x-small">&times;</button><iframe src="https://docs.google.com/forms/d/e/1FAIpQLSewJ_x10HBlFs2lO2zHUBI3ZeSdEXaISpK292RPJBoZyeC1HA/viewform?embedded=true" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe></div></div></body></html>